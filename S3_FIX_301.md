# Fix for S3 301 Redirect Errors

## Problem
Getting HTTP 301 (Moved Permanently) errors when loading images from S3. The URLs show `s3.us-east-1.amazonaws.com` which causes redirects.

## Solution Applied
✅ Updated S3 URL generation to use the correct format for `us-east-1`:
- **Before**: `https://bucket.s3.us-east-1.amazonaws.com/path`
- **After**: `https://bucket.s3.amazonaws.com/path` (no region in domain for us-east-1)

## What You Need to Do

### 1. Restart Your Dev Server
**IMPORTANT**: Stop and restart your Next.js dev server for changes to take effect:

```bash
# Stop the server (Ctrl+C) and restart:
npm run dev
```

### 2. Clear Browser Cache
After restarting, clear your browser cache or do a hard refresh:
- **Chrome/Edge**: `Cmd+Shift+R` (Mac) or `Ctrl+Shift+R` (Windows)
- **Safari**: `Cmd+Option+R` (Mac)

### 3. Verify URLs Are Correct
The new URLs should look like:
```
https://nealy-decor-bucket.s3.amazonaws.com/01-Website-Creation/03%20Gallery/BlueSofaLounge/IMG_0948.jpg
```

Note: `%20` is correct (URL encoding for spaces in folder names)

## What Changed

1. **S3 URL Format**: Now correctly uses `s3.amazonaws.com` for `us-east-1` instead of `s3.us-east-1.amazonaws.com`
2. **URL Encoding**: Path segments are properly URL encoded (spaces become `%20`)
3. **Next.js Config**: S3 domains are properly configured in `next.config.ts`

## Still Having Issues?

### Check Bucket Region
Verify your bucket is actually in `us-east-1`:
1. Go to AWS S3 Console
2. Click on your bucket
3. Check the "Properties" tab → "Region"

If it's in a different region, update `.env.local`:
```bash
NEXT_PUBLIC_S3_REGION=your-actual-region
```

### Check File Names Match Exactly
Ensure the file names in S3 match what the code expects:
- Case-sensitive
- Include file extensions (.jpg, .png, etc.)
- Spaces in folder names are preserved

### Test Direct URL
Try opening an S3 URL directly in your browser:
```
https://nealy-decor-bucket.s3.amazonaws.com/01-Website-Creation/03%20Gallery/BlueSofaLounge/IMG_0948.jpg
```

If this works, the issue is with Next.js Image component configuration.
If this doesn't work, check:
- Bucket permissions (public read access)
- CORS configuration
- File actually exists in S3

## Expected Result

After restarting, images should load without 301 redirect errors. The Network tab in browser dev tools should show:
- **Status**: 200 OK (instead of 301)
- **URL**: `https://nealy-decor-bucket.s3.amazonaws.com/...`

